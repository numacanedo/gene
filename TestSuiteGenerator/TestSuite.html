<!DOCTYPE html>
<html>
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/> 
      <title>Test Suite Generator</title>
      <link rel="stylesheet" href="src/onde.css" type="text/css"/>
   </head>
   <body>
      <img src="src/upload_file.png" id="upfile" style="cursor:pointer" />
      <input type="file" id="files"  name="files[]" style="display:none" />

      <form id="data-entry-form" method="post">
   
         <!-- The element where the generated form goes to. -->
         <div class="onde-panel"></div>
         <!-- The submit button. -->
         <p class="actions"><button type="submit" name="submit">Get JSON</button></p>
      </form>
<script type="application/javascript" src="assets/jquery-1.7.1.min.js"></script>
<script type="application/javascript" src="src/onde.js"></script>
<script type="application/javascript" src="src/FileSaver.js"></script>
<script type="application/javascript" src="src/LinkedHashMap.js"></script>

<script type="application/javascript">
var data = null; 
var sampleSchema = {  
   "type":"object",
   "properties":{  
      "jsonFileName":{  
         "type":"string",
         "required":true
      },
      "baseURL":{  
         "type":"string",
         "required":true
      },
      "username":{  
         "type":"string"
      },
      "password":{  
         "type":"string"
      },
      "tests":{  
         "type":"array",
         "items":{  
            "type":"object",
            "properties":{  
               "exeCondition":{  
                  "type":"array",
                  "items":{  
                     "type":"object",
                     "properties":{  
                        "sourceType":{  
                           "type":"string",
                           "enum":[  
                              "PLAIN",
                              "REFERENCE",
                           ],
                           "required":true
                        },
                        "sourceKey":{  
                           "type":"string"
                        },
                        "compareMethod":{  
                           "type":"string",
                           "enum":[  
                              "EQUAL",
                              "NOEQUAL",
                              "LESS",
                              "LESSOREQUAL",
                              "GREATER",
                              "GREATEROREQUAL",
                              "CONTAIN",
                              "NOCONTAIN",
                              "INCREASEEQUAL",
                              "NOTEMPTY",
                              "ISEMPLTY",
                              "SIZEEQUAL"
                           ],
                           "required":true
                        },
                        "targetType":{  
                           "type":"string",
                           "enum":[  
                              "PLAIN",
                              "REFERENCE",
                              "JSON"
                           ],
                           "required":true
                        },
                        "targetKey":{  
                           "type":"string"
                        }
                     }
                  }
               },
               "name":{  
                  "type":"string"
               },
               "description":{  
                  "type":"string"
               },
               "path":{  
                  "type":"string"
               },
               "altUser":{  
                  "type":"string"
               },
               "altPass":{  
                  "type":"string"
               },
               "method":{  
                  "type":"string",
                  "enum":[  
                     "GET",
                     "POST",
                     "PUT",
                     "DELETE",
                     "HEAD",
                     "GETOBJ",
                     "POSTOBJ",
                     "DELETEOBJ",
                     "GETPAGE",
                     "GETOBJPAGE",
                     "POSTPAGE",
                     "HEADPAGE"
                  ],
                  "required":true
               },
               "requestType":{  
                  "type":"string",
                  "enum":[  
                     "JSON_APPLICATION",
                     "URLENCODED_FORM_APPLICATION"
                  ],
                  "required":true
               },
               "responseType":{  
                  "type":"string",
                  "enum":[  
                     "JSON_APPLICATION",
                     "URLENCODED_FORM_APPLICATION"
                  ],
                  "required":true
               },
               "queryParams":{  
                  "type":"array",
                  "items":{  
                     "type":"object",
                     "properties":{  
                        "key":{  
                           "type":"string",
                           "required":true
                        },
                        "type":{  
                           "type":"string",
                           "enum":[  
                              "PLAIN",
                              "REFERENCE"
                           ],
                           "required":true
                        },
                        "value":{  
                           "type":"string"
                        }
                     }
                  }
               },
               "validationQueryParams":{  
                  "type":"array",
                  "items":{  
                     "type":"object",
                     "properties":{  
                        "key":{  
                           "type":"string",
                           "required":true
                        },
                        "validCase":{  
                           "type":"array",
                           "items":{  
                              "type":"string"
                           }
                        },
                        "negativeCase":{  
                           "type":"object",
                           "properties":{  
                              "handleResponse":{  
                                 "type":"object",
                                 "properties":{  
                                    "statusCode":{  
                                       "type":"integer"
                                    },
                                    "failLevel":{  
                                       "type":"string",
                                       "enum":[  
                                          "ERROR",
                                          "WARNING"
                                       ],
                                       "required":true
                                    },
                                    "failureMessage":{  
                                       "type":"string"
                                    },
                                    "responseChecks":{  
                                       "type":"array",
                                       "items":{  
                                          "type":"object",
                                          "properties":{  
                                             "sourceType":{  
                                                "type":"string",
                                                "enum":[  
                                                   "PLAIN",
                                                   "REFERENCE",
                                                   "JSON"
                                                ],
                                                "required":true
                                             },
                                             "sourceKey":{  
                                                "type":"string"
                                             },
                                             "compareMethod":{  
                                                "type":"string",
                                                "enum":[  
                                                   "EQUAL",
                                                   "NOEQUAL",
                                                   "LESS",
                                                   "LESSOREQUAL",
                                                   "GREATER",
                                                   "GREATEROREQUAL",
                                                   "CONTAIN",
                                                   "NOCONTAIN",
                                                   "INCREASEEQUAL",
                                                   "NOTEMPTY",
                                                   "ISEMPLTY",
                                                   "SIZEEQUAL"
                                                ],
                                                "required":true
                                             },
                                             "targetType":{  
                                                "type":"string",
                                                "enum":[  
                                                   "PLAIN",
                                                   "REFERENCE",
                                                   "JSON"
                                                ],
                                                "required":true
                                             },
                                             "targetKey":{  
                                                "type":"string"
                                             }
                                          }
                                       }
                                    }
                                 }
                              },
                              "testOps":{  
                                 "type":"array",
                                 "items":{  
                                    "type":"object",
                                    "properties":{  
                                       "method":{  
                                          "type":"string",
                                          "enum":[  
                                             "ASSIGN",
                                             "ADD",
                                             "CONCATENATE"
                                          ],
                                          "required":true
                                       },
                                       "sourceType":{  
                                          "type":"string",
                                          "enum":[  
                                             "PLAIN",
                                             "REFERENCE",
                                             "JSON"
                                          ],
                                          "required":true
                                       },
                                       "sourceKey":{  
                                          "type":"string"
                                       },
                                       "targetKey":{  
                                          "type":"string",
                                          "required":true
                                       }
                                    }
                                 }
                              },
                              "invalidCase":{  
                                 "type":"array",
                                 "items":{  
                                    "type":"object",
                                    "properties":{  
                                       "value":{  
                                          "type":"string"
                                       },
                                       "handleResponse":{  
                                          "type":"object",
                                          "properties":{  
                                             "statusCode":{  
                                                "type":"integer"
                                             },
                                             "failLevel":{  
                                                "type":"string",
                                                "enum":[  
                                                   "ERROR",
                                                   "WARNING"
                                                ],
                                                "required":true
                                             },
                                             "failureMessage":{  
                                                "type":"string"
                                             },
                                             "responseChecks":{  
                                                "type":"array",
                                                "items":{  
                                                   "type":"object",
                                                   "properties":{  
                                                      "sourceType":{  
                                                         "type":"string",
                                                         "enum":[  
                                                            "PLAIN",
                                                            "REFERENCE",
                                                            "JSON"
                                                         ],
                                                         "required":true
                                                      },
                                                      "sourceKey":{  
                                                         "type":"string"
                                                      },
                                                      "compareMethod":{  
                                                         "type":"string",
                                                         "enum":[  
                                                            "EQUAL",
                                                            "NOEQUAL",
                                                            "LESS",
                                                            "LESSOREQUAL",
                                                            "GREATER",
                                                            "GREATEROREQUAL",
                                                            "CONTAIN",
                                                            "NOCONTAIN",
                                                            "INCREASEEQUAL",
                                                            "NOTEMPTY",
                                                            "ISEMPLTY",
                                                            "SIZEEQUAL"
                                                         ],
                                                         "required":true
                                                      },
                                                      "targetType":{  
                                                         "type":"string",
                                                         "enum":[  
                                                            "PLAIN",
                                                            "REFERENCE",
                                                            "JSON"
                                                         ],
                                                         "required":true
                                                      },
                                                      "targetKey":{  
                                                         "type":"string"
                                                      }
                                                   }
                                                }
                                             }
                                          }
                                       },
                                       "testOps":{  
                                          "type":"array",
                                          "items":{  
                                             "type":"object",
                                             "properties":{  
                                                "method":{  
                                                   "type":"string",
                                                   "enum":[  
                                                      "ASSIGN",
                                                      "ADD",
                                                      "CONCATENATE"
                                                   ],
                                                   "required":true
                                                },
                                                "sourceType":{  
                                                   "type":"string",
                                                   "enum":[  
                                                      "PLAIN",
                                                      "REFERENCE",
                                                      "JSON"
                                                   ],
                                                   "required":true
                                                },
                                                "sourceKey":{  
                                                   "type":"string"
                                                },
                                                "targetKey":{  
                                                   "type":"string",
                                                   "required":true
                                                }
                                             }
                                          }
                                       }
                                    }
                                 }
                              }
                           }
                        }
                     }
                  }
               },
               "requestForm":{  
                  "type":"array",
                  "items":{  
                     "type":"object",
                     "properties":{  
                        "key":{  
                           "type":"string",
                           "required":true
                        },
                        "type":{  
                           "type":"string",
                           "enum":[  
                              "PLAIN",
                              "REFERENCE"
                           ],
                           "required":true
                        },
                        "value":{  
                           "type":"string"
                        }
                     }
                  }
               },
               "validationRequestForm":{  
                  "type":"array",
                  "items":{  
                     "type":"object",
                     "properties":{  
                        "key":{  
                           "type":"string",
                           "required":true
                        },
                        "validCase":{  
                           "type":"array",
                           "items":{  
                              "type":"string"
                           }
                        },
                        "negativeCase":{  
                           "type":"object",
                           "properties":{  
                              "handleResponse":{  
                                 "type":"object",
                                 "properties":{  
                                    "statusCode":{  
                                       "type":"integer"
                                    },
                                    "failLevel":{  
                                       "type":"string",
                                       "enum":[  
                                          "ERROR",
                                          "WARNING"
                                       ],
                                       "required":true
                                    },
                                    "failureMessage":{  
                                       "type":"string"
                                    },
                                    "responseChecks":{  
                                       "type":"array",
                                       "items":{  
                                          "type":"object",
                                          "properties":{  
                                             "sourceType":{  
                                                "type":"string",
                                                "enum":[  
                                                   "PLAIN",
                                                   "REFERENCE",
                                                   "JSON"
                                                ],
                                                "required":true
                                             },
                                             "sourceKey":{  
                                                "type":"string"
                                             },
                                             "compareMethod":{  
                                                "type":"string",
                                                "enum":[  
                                                   "EQUAL",
                                                   "NOEQUAL",
                                                   "LESS",
                                                   "LESSOREQUAL",
                                                   "GREATER",
                                                   "GREATEROREQUAL",
                                                   "CONTAIN",
                                                   "NOCONTAIN",
                                                   "INCREASEEQUAL",
                                                   "NOTEMPTY",
                                                   "ISEMPLTY",
                                                   "SIZEEQUAL"
                                                ],
                                                "required":true
                                             },
                                             "targetType":{  
                                                "type":"string",
                                                "enum":[  
                                                   "PLAIN",
                                                   "REFERENCE",
                                                   "JSON"
                                                ],
                                                "required":true
                                             },
                                             "targetKey":{  
                                                "type":"string"
                                             }
                                          }
                                       }
                                    }
                                 }
                              },
                              "testOps":{  
                                 "type":"array",
                                 "items":{  
                                    "type":"object",
                                    "properties":{  
                                       "method":{  
                                          "type":"string",
                                          "enum":[  
                                             "ASSIGN",
                                             "ADD",
                                             "CONCATENATE"
                                          ],
                                          "required":true
                                       },
                                       "sourceType":{  
                                          "type":"string",
                                          "enum":[  
                                             "PLAIN",
                                             "REFERENCE",
                                             "JSON"
                                          ],
                                          "required":true
                                       },
                                       "sourceKey":{  
                                          "type":"string"
                                       },
                                       "targetKey":{  
                                          "type":"string",
                                          "required":true
                                       }
                                    }
                                 }
                              },
                              "invalidCase":{  
                                 "type":"array",
                                 "items":{  
                                    "type":"object",
                                    "properties":{  
                                       "value":{  
                                          "type":"string"
                                       },
                                       "handleResponse":{  
                                          "type":"object",
                                          "properties":{  
                                             "statusCode":{  
                                                "type":"integer"
                                             },
                                             "failLevel":{  
                                                "type":"string",
                                                "enum":[  
                                                   "ERROR",
                                                   "WARNING"
                                                ],
                                                "required":true
                                             },
                                             "failureMessage":{  
                                                "type":"string"
                                             },
                                             "responseChecks":{  
                                                "type":"array",
                                                "items":{  
                                                   "type":"object",
                                                   "properties":{  
                                                      "sourceType":{  
                                                         "type":"string",
                                                         "enum":[  
                                                            "PLAIN",
                                                            "REFERENCE",
                                                            "JSON"
                                                         ],
                                                         "required":true
                                                      },
                                                      "sourceKey":{  
                                                         "type":"string"
                                                      },
                                                      "compareMethod":{  
                                                         "type":"string",
                                                         "enum":[  
                                                            "EQUAL",
                                                            "NOEQUAL",
                                                            "LESS",
                                                            "LESSOREQUAL",
                                                            "GREATER",
                                                            "GREATEROREQUAL",
                                                            "CONTAIN",
                                                            "NOCONTAIN",
                                                            "INCREASEEQUAL",
                                                            "NOTEMPTY",
                                                            "ISEMPLTY",
                                                            "SIZEEQUAL"
                                                         ],
                                                         "required":true
                                                      },
                                                      "targetType":{  
                                                         "type":"string",
                                                         "enum":[  
                                                            "PLAIN",
                                                            "REFERENCE",
                                                            "JSON"
                                                         ],
                                                         "required":true
                                                      },
                                                      "targetKey":{  
                                                         "type":"string"
                                                      }
                                                   }
                                                }
                                             }
                                          }
                                       },
                                       "testOps":{  
                                          "type":"array",
                                          "items":{  
                                             "type":"object",
                                             "properties":{  
                                                "method":{  
                                                   "type":"string",
                                                   "enum":[  
                                                      "ASSIGN",
                                                      "ADD",
                                                      "CONCATENATE"
                                                   ],
                                                   "required":true
                                                },
                                                "sourceType":{  
                                                   "type":"string",
                                                   "enum":[  
                                                      "PLAIN",
                                                      "REFERENCE",
                                                      "JSON"
                                                   ],
                                                   "required":true
                                                },
                                                "sourceKey":{  
                                                   "type":"string"
                                                },
                                                "targetKey":{  
                                                   "type":"string",
                                                   "required":true
                                                }
                                             }
                                          }
                                       }
                                    }
                                 }
                              }
                           }
                        }
                     }
                  }
               },
               "jsonPayload":{  
                  "type":"object",
                  "properties":{  
                     "baseNode":{  
                        "type":"string",
                        "format":"multiline"
                     },
                     "replaceJsonField":{  
                        "type":"array",
                        "items":{  
                           "type":"object",
                           "properties":{  
                              "key":{  
                                 "type":"string",
                                 "required":true
                              },
                              "type":{  
                                 "type":"string",
                                 "enum":[  
                                    "PLAIN",
                                    "REFERENCE"
                                 ],
                                 "required":true
                              },
                              "value":{  
                                 "type":"string"
                              }
                           }
                        }
                     },
                     "validationReplaceJsonField":{  
                        "type":"array",
                        "items":{  
                           "type":"object",
                           "properties":{  
                              "key":{  
                                 "type":"string",
                                 "required":true
                              },
                              "validCase":{  
                                 "type":"array",
                                 "items":{  
                                    "type":"string"
                                 }
                              },
                              "negativeCase":{  
                                 "type":"object",
                                 "properties":{  
                                    "handleResponse":{  
                                       "type":"object",
                                       "properties":{  
                                          "statusCode":{  
                                             "type":"integer"
                                          },
                                          "failLevel":{  
                                             "type":"string",
                                             "enum":[  
                                                "ERROR",
                                                "WARNING"
                                             ],
                                             "required":true
                                          },
                                          "failureMessage":{  
                                             "type":"string"
                                          },
                                          "responseChecks":{  
                                             "type":"array",
                                             "items":{  
                                                "type":"object",
                                                "properties":{  
                                                   "sourceType":{  
                                                      "type":"string",
                                                      "enum":[  
                                                         "PLAIN",
                                                         "REFERENCE",
                                                         "JSON"
                                                      ],
                                                      "required":true
                                                   },
                                                   "sourceKey":{  
                                                      "type":"string"
                                                   },
                                                   "compareMethod":{  
                                                      "type":"string",
                                                      "enum":[  
                                                         "EQUAL",
                                                         "NOEQUAL",
                                                         "LESS",
                                                         "LESSOREQUAL",
                                                         "GREATER",
                                                         "GREATEROREQUAL",
                                                         "CONTAIN",
                                                         "NOCONTAIN",
                                                         "INCREASEEQUAL",
                                                         "NOTEMPTY",
                                                         "ISEMPLTY",
                                                         "SIZEEQUAL"
                                                      ],
                                                      "required":true
                                                   },
                                                   "targetType":{  
                                                      "type":"string",
                                                      "enum":[  
                                                         "PLAIN",
                                                         "REFERENCE",
                                                         "JSON"
                                                      ],
                                                      "required":true
                                                   },
                                                   "targetKey":{  
                                                      "type":"string"
                                                   }
                                                }
                                             }
                                          }
                                       }
                                    },
                                    "testOps":{  
                                       "type":"array",
                                       "items":{  
                                          "type":"object",
                                          "properties":{  
                                             "method":{  
                                                "type":"string",
                                                "enum":[  
                                                   "ASSIGN",
                                                   "ADD",
                                                   "CONCATENATE"
                                                ],
                                                "required":true
                                             },
                                             "sourceType":{  
                                                "type":"string",
                                                "enum":[  
                                                   "PLAIN",
                                                   "REFERENCE",
                                                   "JSON"
                                                ],
                                                "required":true
                                             },
                                             "sourceKey":{  
                                                "type":"string"
                                             },
                                             "targetKey":{  
                                                "type":"string",
                                                "required":true
                                             }
                                          }
                                       }
                                    },
                                    "invalidCase":{  
                                       "type":"array",
                                       "items":{  
                                          "type":"object",
                                          "properties":{  
                                             "value":{  
                                                "type":"string"
                                             },
                                             "handleResponse":{  
                                                "type":"object",
                                                "properties":{  
                                                   "statusCode":{  
                                                      "type":"integer"
                                                   },
                                                   "failLevel":{  
                                                      "type":"string",
                                                      "enum":[  
                                                         "ERROR",
                                                         "WARNING"
                                                      ],
                                                      "required":true
                                                   },
                                                   "failureMessage":{  
                                                      "type":"string"
                                                   },
                                                   "responseChecks":{  
                                                      "type":"array",
                                                      "items":{  
                                                         "type":"object",
                                                         "properties":{  
                                                            "sourceType":{  
                                                               "type":"string",
                                                               "enum":[  
                                                                  "PLAIN",
                                                                  "REFERENCE",
                                                                  "JSON"
                                                               ],
                                                               "required":true
                                                            },
                                                            "sourceKey":{  
                                                               "type":"string"
                                                            },
                                                            "compareMethod":{  
                                                               "type":"string",
                                                               "enum":[  
                                                                  "EQUAL",
                                                                  "NOEQUAL",
                                                                  "LESS",
                                                                  "LESSOREQUAL",
                                                                  "GREATER",
                                                                  "GREATEROREQUAL",
                                                                  "CONTAIN",
                                                                  "NOCONTAIN",
                                                                  "INCREASEEQUAL",
                                                                  "NOTEMPTY",
                                                                  "ISEMPLTY",
                                                                  "SIZEEQUAL"
                                                               ],
                                                               "required":true
                                                            },
                                                            "targetType":{  
                                                               "type":"string",
                                                               "enum":[  
                                                                  "PLAIN",
                                                                  "REFERENCE",
                                                                  "JSON"
                                                               ],
                                                               "required":true
                                                            },
                                                            "targetKey":{  
                                                               "type":"string"
                                                            }
                                                         }
                                                      }
                                                   }
                                                }
                                             },
                                             "testOps":{  
                                                "type":"array",
                                                "items":{  
                                                   "type":"object",
                                                   "properties":{  
                                                      "method":{  
                                                         "type":"string",
                                                         "enum":[  
                                                            "ASSIGN",
                                                            "ADD",
                                                            "CONCATENATE"
                                                         ],
                                                         "required":true
                                                      },
                                                      "sourceType":{  
                                                         "type":"string",
                                                         "enum":[  
                                                            "PLAIN",
                                                            "REFERENCE",
                                                            "JSON"
                                                         ],
                                                         "required":true
                                                      },
                                                      "sourceKey":{  
                                                         "type":"string"
                                                      },
                                                      "targetKey":{  
                                                         "type":"string",
                                                         "required":true
                                                      }
                                                   }
                                                }
                                             }
                                          }
                                       }
                                    }
                                 }
                              }
                           }
                        }
                     }
                  }
               },
               "handleResponse":{  
                  "type":"object",
                  "properties":{  
                     "statusCode":{  
                        "type":"integer"
                     },
                     "failLevel":{  
                        "type":"string",
                        "enum":[  
                           "ERROR",
                           "WARNING"
                        ],
                        "required":true
                     },
                     "failureMessage":{  
                        "type":"string"
                     },
                     "responseChecks":{  
                        "type":"array",
                        "items":{  
                           "type":"object",
                           "properties":{  
                              "sourceType":{  
                                 "type":"string",
                                 "enum":[  
                                    "PLAIN",
                                    "REFERENCE",
                                    "JSON"
                                 ],
                                 "required":true
                              },
                              "sourceKey":{  
                                 "type":"string"
                              },
                              "compareMethod":{  
                                 "type":"string",
                                 "enum":[  
                                    "EQUAL",
                                    "NOEQUAL",
                                    "LESS",
                                    "LESSOREQUAL",
                                    "GREATER",
                                    "GREATEROREQUAL",
                                    "CONTAIN",
                                    "NOCONTAIN",
                                    "INCREASEEQUAL",
                                    "NOTEMPTY",
                                    "ISEMPLTY",
                                    "SIZEEQUAL"
                                 ],
                                 "required":true
                              },
                              "targetType":{  
                                 "type":"string",
                                 "enum":[  
                                    "PLAIN",
                                    "REFERENCE",
                                    "JSON"
                                 ],
                                 "required":true
                              },
                              "targetKey":{  
                                 "type":"string"
                              }
                           }
                        }
                     }
                  }
               },
               "testOps":{  
                  "type":"array",
                  "items":{  
                     "type":"object",
                     "properties":{  
                        "method":{  
                           "type":"string",
                           "enum":[  
                              "ASSIGN",
                              "ADD",
                              "CONCATENATE"
                           ],
                           "required":true
                        },
                        "sourceType":{  
                           "type":"string",
                           "enum":[  
                              "PLAIN",
                              "REFERENCE",
                              "JSON"
                           ],
                           "required":true
                        },
                        "sourceKey":{  
                           "type":"string"
                        },
                        "targetKey":{  
                           "type":"string",
                           "required":true
                        }
                     }
                  }
               },
               "endConditons":{  
                  "type":"array",
                  "items":{  
                     "type":"object",
                     "properties":{  
                        "endCheck":{  
                           "type":"array",
                           "items":{  
                              "type":"object",
                              "properties":{  
                                 "sourceType":{  
                                    "type":"string",
                                    "enum":[  
                                       "PLAIN",
                                       "REFERENCE",
                                       "JSON"
                                    ],
                                    "required":true
                                 },
                                 "sourceKey":{  
                                    "type":"string"
                                 },
                                 "compareMethod":{  
                                    "type":"string",
                                    "enum":[  
                                       "EQUAL",
                                       "NOEQUAL",
                                       "LESS",
                                       "LESSOREQUAL",
                                       "GREATER",
                                       "GREATEROREQUAL",
                                       "CONTAIN",
                                       "NOCONTAIN",
                                       "INCREASEEQUAL",
                                       "NOTEMPTY",
                                       "ISEMPLTY",
                                       "SIZEEQUAL"
                                    ],
                                    "required":true
                                 },
                                 "targetType":{  
                                    "type":"string",
                                    "enum":[  
                                       "PLAIN",
                                       "REFERENCE",
                                       "JSON"
                                    ],
                                    "required":true
                                 },
                                 "targetKey":{  
                                    "type":"string"
                                 }
                              }
                           },
                           "required":true
                        },
                        "finalCheck":{  
                           "type":"array",
                           "items":{  
                              "type":"object",
                              "properties":{  
                                 "sourceType":{  
                                    "type":"string",
                                    "enum":[  
                                       "PLAIN",
                                       "REFERENCE",
                                       "JSON"
                                    ],
                                    "required":true
                                 },
                                 "sourceKey":{  
                                    "type":"string"
                                 },
                                 "compareMethod":{  
                                    "type":"string",
                                    "enum":[  
                                       "EQUAL",
                                       "NOEQUAL",
                                       "LESS",
                                       "LESSOREQUAL",
                                       "GREATER",
                                       "GREATEROREQUAL",
                                       "CONTAIN",
                                       "NOCONTAIN",
                                       "INCREASEEQUAL",
                                       "NOTEMPTY",
                                       "ISEMPLTY",
                                       "SIZEEQUAL"
                                    ],
                                    "required":true
                                 },
                                 "targetType":{  
                                    "type":"string",
                                    "enum":[  
                                       "PLAIN",
                                       "REFERENCE",
                                       "JSON"
                                    ],
                                    "required":true
                                 },
                                 "targetKey":{  
                                    "type":"string"
                                 }
                              }
                           }
                        }
                     }
                  }
               }
            }
         }
      }
   }
};
var ondeSession = new onde.Onde($('#data-entry-form'));





document.getElementById('files').addEventListener('change', handleFileSelect, false);

function handleFileSelect(evt) {
   var files = evt.target.files; // FileList object

   // files is a FileList of File objects. List some properties.
   for (var i = 0, f;  f = files[i]; i++) {
      f
      var reader = new FileReader();
      reader.onload = function(e) {
         data = reader.result;
         console.log(data);
         ondeSession.render(sampleSchema, jQuery.parseJSON( data ),  {collapsedCollapsibles: false });
      }
      reader.readAsText(f);
   }
}

$("#upfile").click(function () {
    $("#files").trigger('click');
});



$(document).ready(function () {

   
   
   ondeSession.render(sampleSchema, null, { collapsedCollapsibles: true });
  
   $('#data-entry-form').submit(function (evt) {
   evt.preventDefault();
   var outData = ondeSession.getData();
   if (outData.errorCount) {
      alert("Error");
   } 
   else {
      var str = JSON.stringify(outData.data, null, "  ");
      var blob = new Blob([str], {type: "text/plain;charset=utf-8"});
      saveAs(blob, outData.data.jsonFileName + ".json");
   }
   return false;
   });
});
</script>


   </body>
</html>
